# API Reference

## WebSocket API

### Подключение
- **URL**: `ws://localhost:8081/ws`
- **Описание**: Двусторонний канал связи для получения запросов на печать и отправки ответов.

### Команды

1. **printCheck**
    - **Описание**: Запрос на печать чека на основе предоставленных данных в формате JSON.
    - **Пример запроса**:
      ```json
      {
        "command": "printCheck",
        "data": {
          "tableData": [
            {
              "name": "Товар 1",
              "quantity": "2",
              "price": "100.00"
            }
          ],
          "cashier": "Иван Иванов",
          "payments": [
            {
              "type": "cash",
              "amount": 200.00
            }
          ],
          "type": "sell"
        }
      }
      ```
    - **Пример ответа**:
      ```json
      {
        "type": "success",
        "data": 123,
        "message": "Чек успешно напечатан"
      }
      ```

2. **closeShift**
    - **Описание**: Запрос на закрытие текущей смены с указанным именем кассира.
    - **Пример запроса**:
      ```json
      {
        "command": "closeShift",
        "data": {
          "cashier": "Иван Иванов"
        }
      }
      ```
    - **Пример ответа**:
      ```json
      {
        "type": "success",
        "message": "Смена успешно закрыта"
      }
      ```

3. **xReport**
    - **Описание**: Запрос на печать X-отчета.
    - **Пример запроса**:
      ```json
      {
        "command": "xReport"
      }
      ```
    - **Пример ответа**:
      ```json
      {
        "type": "success",
        "message": "X-отчет успешно напечатан"
      }
      ```

### Ошибки
- **Описание**: В случае ошибки, сервер отправляет сообщение с типом `error`.
- **Пример ответа**:
  ```json
  {
    "type": "error",
    "message": "Ошибка при разборе данных чека"
  }
  ```
